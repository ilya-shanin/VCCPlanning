{% extends 'base_generic.html' %}
{% block title %}<title>Поиск сеансов</title>{% endblock %}
{% block content %} 
    <div class = "content events-list">
        <h3>Найдено видеоконференций: {{confs_count}}</h3>

        {% if confs_count == 0 %}
            <div class="alert alert-warning">
                По заданному запросу не удалось ничего найти
            </div>
        {% endif %}

        <ul class = "list-group-flush">
            <b class="hr-rainbow"></b>
            <hr class="hr-custom">

            {% for conf in conferences %}
            <li class = "list-group-item align-items-start">
                <div class="row">
                    <div class = "col-sm-2">

                        <div class = "c-date">
                            <div class="fw-bold">
                                <i class='bx bx-calendar' ></i>{{conf.start_time.date}}
                                {% if conf.end_time and conf.start_time.date != conf.end_time.date %}
                                - {{conf.end_time.date}}
                                {% endif %}
                            </div>
                        </div>

                        <div class = "c-time">
                            <p>
                                <i class='bx bx-time-five'></i>    
                                {{conf.start_time.time}}
                                {% if conf.end_time %}
                                    - {{conf.end_time.time}}
                                {% endif %}</p>
                        </div>

                    </div>

                    <div class="col-sm-10">
                        <div class = "fw-bold conf_name">
                            {% if conf.live %}
                            <span class = "badge bg-danger rounded-pill">LIVE</span>
                            {% endif %}
                            {{conf.name}}
                        </div>

                        <div class = "text-muted conf_text">{{conf.notes}}</div>

                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class = "detail-ref">
                            <a href="{{conf.get_absolute_url}}"><i class='bx bx-link-external' ></i>&nbspПерейти</a>
                        </div>
                    </div>
                </div>

            </li>
            <b class="hr-rainbow"></b>
            <hr class="hr-custom">
            {% endfor %}

        </ul>
        <div class="pagination">
            <span class="step-links">
                <div class="btn-group" role="group">
                    {% if page_obj.has_previous %}
                        <a href="?page=1" class="btn btn-outline-primary" role="button">&laquo; Первая</a>
                        <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-primary" role="button">Предыдущая</a>
                    {% endif %}
            
                    <span class="current btn btn-primary disabled">
                        Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}
                    </span>
            
                    {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-primary" role="button">Следующая</a>
                        <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-outline-primary" role="button">Последняя &raquo;</a>
                    {% endif %}
                </div>
            </span>
        </div>
    </div>
{% endblock %}